<!doctype html>
<html lang="en" data-color-mode="dark">
<head>
<meta charset="utf-8">
<title># 【进阶第14期】正则表达式入门
[TOC]


## 前言
---
### 正则表达式功能：验证、查找、替换
1.`验证`字符串是否符合指定特征，比如验证是否是合法的邮件地址。**Validation**
2. 用来`查找`字符串，从一个长的文本中查找符合指定特征的字符串，比查找固定字符串更加灵活方便。**Match/find**
3. 用来`替换`，比普通的替换更强大。**Replace**

## 正则表达式规则
---
### 字符分类
#### 普通字符
字母、数字、汉字、下划线、以及后边章节中没有特殊定义的标点符号，都是"普通字符"。

#### 简单的转义字符

表达式 | 可匹配
-- | -- |--
 \r, \n| 代表回车和换行符
 \t    | 制表符
 \\    | 代表 "\" 本身

还有其他元字符， 在`前面加 "\" 后`，就代表该符号本身

 表达式 | 可匹配
 --     |  --
 `\^`    |  匹配 ^ 符号本身
 `\$`  |  匹配 $ 符号本身
 `\.`     |  匹配小数点（.）本身

`举例1：` 表达式 "\$d"，在匹配字符串 "abc$de" 时 ，匹配结果是：成功；匹配到的内容是："$d"；匹配到的位置是：开始于3，结束于5。

#### 元字符
分类：
* 单个字符集、自定义字符集合
* 字符次数限定符
* 边界界定符
* 匹配引用

##### 字符集
**匹配 '多种字符' 其中的任意一个字符**

 表达式 | 可匹配
 --     |  --
 \d    | 任意一个数字，0~9 中的任意一个
 \w   | 任意一个字母或数字或下划线，也就是 A~Z,a~z,0~9, \_ 中任意一个
 \s   | 包括空格、制表符、换页符等空白字符的其中任意一个
 .    |  小数点可以匹配除了换行符（\n）以外的任意一个字符

`举例1：` 表达式 "\d\d "，在匹配 "abc123" 时 ，匹配的结果是：成功；匹配到的内容是："12"；匹配到的位置是：开始于3，结束于5。

##### 自定义字符集
**自定义能够匹配 '多种字符' 的任意一个字符**

 表达式 | 可匹配
 --    |  --
 [ab5@] | 匹配 "a" 或 "b" 或 "5" 或 "@"
 [^abc] | 匹配 "a","b","c" 之外的任意一个字符
 [f-k] | 匹配 "f"~"k" 之间的任意一个字母
 [^A-F0-3]|匹配 "A"~"F","0"~"3" 之外的任意一个字符
`举例1：`表达式 " [bcd] [bcd] " 匹配 "abc123" 时 ，匹配的结果是：成功；匹配到内容是："bc"；匹配的位置是：开始于1，结束于3。
`举例2：`表达式 " [^abc] " 匹配 "abc123" 时 ，匹配的结果是：成功；匹配到的内容是："1"；匹配到的位置是：开始于3，结束于4。

##### 次数限定符
**修饰匹配次数的特殊符号**
使用方法是："次数修饰"放在"被修饰的表达式"后边。

 表达式|作用
--|--
{n}|表达式重复n次，比如：  "\w{2}" 相当于 "\w\w" ；  "a{5}" 相当于 "aaaaa"
{m,n}|表达式至少重复m次，最多重复n次，比如：  "ba{1,3}"可以匹配 "ba"或"baa"或"baaa"
 {m,} | 表达式至少重复m次，比如：  "\w\d{2,}"可以匹配 "a12","\_456","M12344"...
 ? | 出现零次或一次，最多一次，相当于 {0,1}，比如：  "a[cd]?"可以匹配 "a","ac","ad"
 + | 表达式至少出现1次，相当于 {1,}，比如：  "a+b"可以匹配 "ab","aab","aaab"...
 \* | 出现任意次（零次、一次、多次），相当于 {0,}，比如：  "\^*b"可以匹配 "b","^^^b"...

`举例1：` 表达式 " \d + \. ? \d * " 在匹配 "It costs $12.5" 时 ，匹配的结果是：成功；匹配到的内容是："12.5"；匹配到的位置是：开始于10，结束于14。
`举例2：` 表达式 " go {2,8} gle " 在匹配 "Ads by goooooogle" 时 ，匹配的结果是：成功；匹配到的内容是："goooooogle"；匹配到的位置是：开始于7，结束于17。

##### 边界（位置）界定符
其他一些代表抽象意义的特殊符号

表达式|作用
 -- |--
 ^  | 与字符串开始的地方匹配，不匹配任何字符
 $ | 与字符串结束的地方匹配，不匹配任何字符
 \b | 匹配一个单词边界，也就是单词和空格之间的位置，不匹配任何字符
\1 \2 ..\7 |标识一个八进制转义码或反向引用。如果 \n前面至少有n个捕获子表达式，那么 _n_ 是反向引用。否则，如果n是八进制数 (0-7)，那么n是八进制转义码。

`举例1：` 表达式 `^aaa` 在匹配 "xxxaaa xxx" 时 ，匹配结果是：失败。因为 "^" 要求与字符串开始的地方匹配，因此，只有当 "aaa" 位于字符串的开头的时候，"^aaa" 才能匹配， 比如："aaaxxxxxx" 。
`举例2：` 表达式 `aaa$` 在匹配 "xxx aaa xxx" 时 ，匹配结果是：失败。因为 "$" 要求与字符串结束的地方匹配，因此，只有当 "aaa" 位于字符串的结尾的时候，"aaa$" 才能匹配， 比如："xxx xxx aaa" 。
`举例3：` 表达式 " `.\b.`" 在匹配 "@@@abc" 时 ，匹配结果是：成功；匹配到的内容是："@a"；匹配到的位置是：开始于2，结束于4。

进一步说明：
```
"\b" 与 "^" 和 "$" 类似，本身不匹配任何字符，但是它要求它在匹配结果中所处位置的左右两边，其中一边是 "\w" 范围，另一边是 非"\w" 的范围。
```

`举例4：` 表达式 " \b end \b " 在匹配 "weekend,endfor,end" 时 ，匹配结果是：成功；匹配到的内容是："end"；匹配到的位置是：开始于15，结束于18。


一些符号可以影响表达式内部的子表达式之间的关系：

 表达式|作用
--| --
 竖线 | 左右两边表达式之间 "或" 关系，匹配左边或者右边
 ( ) | (1). 在被修饰匹配次数的时候，括号中的表达式可以作为整体被修饰  (2). `取匹配结果`的时候，括号中的表达式匹配到的内容可以被单独得到

`举例5：` 表达式 " Tom | Jack " 在匹配字符串 "I'm Tom, he is Jack" 时 ，匹配结果是：成功；匹配到的内容是："Tom"；匹配到的位置是：开始于4，结束于7。匹配下一个时，匹配结果是：成功；匹配到的内容是："Jack"；匹配到的位置时：开始于15，结束于19。

`举例6：` 表达式 " ( go \s * ) + " 在匹配 "Let's go go go!" 时 ，匹配结果是：成功；匹配到内容是："go go go"；匹配到的位置是：开始于6，结束于14。

`举例7：` 表达式 " ￥ ( \d + \. ? \d * ) " 在匹配 "＄10.9,￥20.5" 时 ，匹配的结果是：成功；匹配到的内容是："￥20.5"；匹配到的位置是：开始于6，结束于10。单独获取括号范围匹配到的内容是："20.5"。

##### 字符集以外
 表达式 | 可匹配
 -- | --
 \S | 匹配所有非空白字符（"\s" 可匹配各个空白字符）
 \D | 匹配所有的非数字字符
 \W | 匹配所有的字母、数字、下划线以外的字符
 \B | 匹配非单词边界，即左右两边都是 "\w" 范围或者左右两边都不是 "\w" 范围时的字符缝隙
[^x] | 匹配非x字符
[^aeiou] | 匹配非a、e、i、o、u字符

##### 引用匹配到的字符串

符号|释义
--|--
 $1、$2、...、$99 | 与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。 |
 $&#x26; | 与 regexp 相匹配的子串。 |
 $` | 位于匹配子串左侧的文本。 |
 $' | 位于匹配子串右侧的文本。 |
 `$$` | 直接量符号。 |

### 高级规则--匹配次数中的贪婪与非贪婪
---
#### 贪婪模式
在使用修饰匹配次数的特殊符号时，有几种表示方法可以使同一个表达式能够匹配不同的次数，比如："{m,n}", "{m,}", "?", "\*", "+"，具体匹配的次数随被匹配的字符串而定。这种 重复匹配不定次数的表达式在匹配过程中，总是尽可能多的匹配 。比如，`针对文本 "dxxxdxxxd"`，举例如下：

 表达式 | 匹配结果
 -- | --
 (d)(\w+) | "\w+" 将匹配第一个 "d" 之后的所有字符 "xxxdxxxd"
(d)(\w+)(d) | "\w+" 将匹配第一个 "d" 和最后一个 "d" 之间的所有字符 "xxxdxxx"。虽然 "\w+" 也能够匹配上最后一个 "d"，但是为了使整个表达式匹配成功，"\w+" 可以 "让出" 它本来能够匹配的最后一个 "d"

由此可见，"\w+" 在匹配的时候，总是尽可能多的匹配符合它规则的字符。虽然第二个举例中，它没有匹配最后一个 "d"，但那也是为了让整个表达式能够匹配成功。同理，带 "\*" 和 "{m,n}" 的表达式都是尽可能地多匹配， 带 "?" 的表达式在可匹配可不匹配的时候，也是尽可能的 "要匹配 "。这种匹配原则就叫作 `贪婪模式`。

#### 非贪婪模式（最小匹配）
在修饰匹配次数的特殊符号后再加上一个 "?" 号 ，则可以使匹配次数不定的表达式尽可能少的匹配，使可匹配可不匹配的表达式，尽可能的 "不匹配"。这种匹配原则叫作 "非贪婪" 模式，也叫作 "勉强" 模式。如果少匹配就会导致整个表达式匹配失败的时候，与贪婪模式类似，非贪婪模式会最小限度的再匹配一些，以使整个表达式匹配成功。举例如下，针对文本 "dxxxdxxxd" 举例：

 表达式 | 匹配结果
 --  |  --
(d)(\w+?)  |"\w+?" 将尽可能少的匹配第一个 "d" 之后的字符，结果是："\w+?" 只匹配了一个 "x"
(d) (\w+?)(d)  | 为了让整个表达式匹配成功，"\w+?" 不得不匹配 "xxx" 才可以让后边的 "d" 匹配，从而使整个表达式匹配成功。因此，结果是："\w+?" 匹配 "xxx"


```
`举例1：`
表达式"&#x3C;td> ( . * ) &#x3C;/td> " 与字符串 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td> &#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>" 匹配时 ，匹配的结果是：成功；匹配到的内容是 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td> &#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>" 整个字符串， 表达式中的 "&#x3C;/td>" 将与字符串中最后一个 "&#x3C;/td>" 匹配。 
`举例2：` 相比之下，表达式 " &#x3C;td> ( . * ? ) &#x3C;/td> " 匹配举例1中同样的字符串时 ，将只得到 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td>"， 再次匹配下一个时，可以得到第二个 "&#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>"。
````
（2）、反向引用 \1, \2...
  表达式在匹配时，表达式引擎会将小括号 "( )" 包含的表达式所匹配到的字符串记录下来。在获取匹配结果的时候，小括号包含的表达式所匹配到的字符串可以单独获取。这一点，在前面的举例中，已经多次展示了。在实际应用场合中，当用某种边界来查找，而所要获取的内容又不包含边界时，必须使用小括号来指定所要的范围。比如前面的 " &#x3C;td> ( . * ? ) &#x3C;/td> "。

 其实，"小括号包含的表达式所匹配到的字符串" 不仅是在匹配结束后才可以使用，在匹配过程中也可以使用。表达式后边的部分，可以引用前面 "括号内的子匹配已经匹配到的字符串"。引用方法是 "\" 加上一个数字。"\1" 引用第1对括号内匹配到的字符串，"\2" 引用第2对括号内匹配到的字符串……以此类推，如果一对括号内包含另一对括号，则外层的括号先排序号。换句话说，哪一对的左括号 "(" 在前，那这一对就先排序号。

举例如下：
`举例1：`表达式 " ( ' | " ) ( . * ? ) ( \1 ) " 在匹配 " 'Hello', "World" " 时 ，匹配结果是：成功；匹配到的内容是：" 'Hello' "。再次匹配下一个时，可以匹配到 " "World" "。
`举例2：`表达式 " ( \w ) \1 {4,} " 在匹配 "aa bbbb abcdefg ccccc 111121111 999999999" 时 ，匹配结果是：成功；匹配到的内容是 "ccccc"。再次匹配下一个时，将得到 999999999。这个表达式要求 "\w" 范围的字符至少重复5次，   注意与 "\w{5,}" 之间的区别 。


 举例3：表达式 " &#x3C; ( \w + ) \s * ( \w + (  &#x26;  regex cheatsheet &#x26;  Quick Reference</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta description="，为开发人员分享快速参考备忘单。">
<meta keywords="regex,reference,Quick,Reference,cheatsheet,cheat,sheet">
<link rel="icon" href="data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%221em%22%20width%3D%221em%22%3E%20%3Cpath%20d%3D%22m21.66%2010.44-.98%204.18c-.84%203.61-2.5%205.07-5.62%204.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2%201.17-2.42%203.16-3.07%206.5-2.28l1.67.39c4.19.98%205.47%203.05%204.49%207.23Z%22%20fill%3D%22%23c9d1d9%22%2F%3E%20%3Cpath%20d%3D%22M15.06%2019.39c-.62.42-1.4.77-2.35%201.08l-1.58.52c-3.97%201.28-6.06.21-7.35-3.76L2.5%2013.28c-1.28-3.97-.22-6.07%203.75-7.35l1.58-.52c.41-.13.8-.24%201.17-.31-.3.61-.54%201.35-.74%202.2l-.98%204.19c-.98%204.18.31%206.24%204.48%207.23l1.68.4c.58.14%201.12.23%201.62.27Zm2.43-8.88c-.06%200-.12-.01-.19-.02l-4.85-1.23a.75.75%200%200%201%20.37-1.45l4.85%201.23a.748.748%200%200%201-.18%201.47Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3Cpath%20d%3D%22M14.56%2013.89c-.06%200-.12-.01-.19-.02l-2.91-.74a.75.75%200%200%201%20.37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3C%2Fsvg%3E" type="image/svg+xml">
<link rel="stylesheet" href="../style/style.css">
<link rel="stylesheet" href="../style/katex.css">
</head>
<body><nav class="header-nav"><div class="max-container"><a href="../index.html" class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <path d="m21.66 10.44-.98 4.18c-.84 3.61-2.5 5.07-5.62 4.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2 1.17-2.42 3.16-3.07 6.5-2.28l1.67.39c4.19.98 5.47 3.05 4.49 7.23Z" fill="#c9d1d9"></path>
  <path d="M15.06 19.39c-.62.42-1.4.77-2.35 1.08l-1.58.52c-3.97 1.28-6.06.21-7.35-3.76L2.5 13.28c-1.28-3.97-.22-6.07 3.75-7.35l1.58-.52c.41-.13.8-.24 1.17-.31-.3.61-.54 1.35-.74 2.2l-.98 4.19c-.98 4.18.31 6.24 4.48 7.23l1.68.4c.58.14 1.12.23 1.62.27Zm2.43-8.88c-.06 0-.12-.01-.19-.02l-4.85-1.23a.75.75 0 0 1 .37-1.45l4.85 1.23a.748.748 0 0 1-.18 1.47Z" fill="#228e6c"></path>
  <path d="M14.56 13.89c-.06 0-.12-.01-.19-.02l-2.91-.74a.75.75 0 0 1 .37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z" fill="#228e6c"></path>
</svg>
<span class="title">Quick Reference</span></a><div class="menu"><a href="javascript:void(0);" class="searchbtn" id="searchbtn"><svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 18 18">
  <path fill="currentColor" d="M17.71,16.29 L14.31,12.9 C15.4069846,11.5024547 16.0022094,9.77665502 16,8 C16,3.581722 12.418278,0 8,0 C3.581722,0 0,3.581722 0,8 C0,12.418278 3.581722,16 8,16 C9.77665502,16.0022094 11.5024547,15.4069846 12.9,14.31 L16.29,17.71 C16.4777666,17.8993127 16.7333625,18.0057983 17,18.0057983 C17.2666375,18.0057983 17.5222334,17.8993127 17.71,17.71 C17.8993127,17.5222334 18.0057983,17.2666375 18.0057983,17 C18.0057983,16.7333625 17.8993127,16.4777666 17.71,16.29 Z M2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 Z"></path>
</svg><span>搜索</span><span>⌘K</span></a><a href="https://github.com/jaywcjlove/reference/blob/main/experience/regex.md" class="" target="__blank"><svg viewBox="0 0 36 36" fill="currentColor" height="1em" width="1em"><path d="m33 6.4-3.7-3.7a1.71 1.71 0 0 0-2.36 0L23.65 6H6a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h22a2 2 0 0 0 2-2V11.76l3-3a1.67 1.67 0 0 0 0-2.36ZM18.83 20.13l-4.19.93 1-4.15 9.55-9.57 3.23 3.23ZM29.5 9.43 26.27 6.2l1.85-1.85 3.23 3.23Z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg><span>编辑</span></a><button id="darkMode" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="light" height="1em" width="1em">
  <path d="M6.995 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007-2.246-5.007-5.007-5.007S6.995 9.239 6.995 12zM11 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2H2zm17 0h3v2h-3zM5.637 19.778l-1.414-1.414 2.121-2.121 1.414 1.414zM16.242 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.344 7.759 4.223 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"></path>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="dark" height="1em" width="1em">
  <path d="M12 11.807A9.002 9.002 0 0 1 10.049 2a9.942 9.942 0 0 0-5.12 2.735c-3.905 3.905-3.905 10.237 0 14.142 3.906 3.906 10.237 3.905 14.143 0a9.946 9.946 0 0 0 2.735-5.119A9.003 9.003 0 0 1 12 11.807z"></path>
</svg>
</button><script src="../js/dark.js"></script><a href="https://github.com/geek-tim/reference" class="" target="__blank"><svg viewBox="0 0 16 16" fill="currentColor" height="1em" width="1em"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></div></nav><div class="wrap h1body-exist max-container"><header class="wrap-header h1wrap"><h1 id="进阶第14期正则表达式入门"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 14 14" height="1em" width="1em">
  <path d="M8.676 5.214a5.533 5.533 0 0 0-.312-1.527c-.253-.729-.379-1.23-.379-1.505 0-.387.09-.68.268-.881A.892.892 0 0 1 8.933 1c.23 0 .43.1.602.301.17.2.256.487.256.858 0 .335-.1.803-.3 1.405a7.515 7.515 0 0 0-.358 1.65c.41-.26.777-.576 1.104-.947.506-.588.88-.952 1.126-1.093.245-.141.494-.212.747-.212.245 0 .45.086.613.257.171.163.257.36.257.59 0 .275-.123.52-.368.736-.246.216-.859.431-1.84.647a8.032 8.032 0 0 0-1.427.435c.387.2.859.353 1.416.457.9.163 1.487.368 1.762.613.282.245.423.513.423.803a.776.776 0 0 1-.256.58.793.793 0 0 1-.58.245c-.223 0-.472-.078-.747-.235-.267-.156-.632-.505-1.092-1.048a5.909 5.909 0 0 0-1.138-1.025c.015.423.1.884.257 1.382.267.877.401 1.476.401 1.795 0 .297-.089.55-.267.758-.179.2-.368.301-.569.301-.275 0-.524-.108-.747-.323-.156-.156-.234-.405-.234-.747 0-.357.085-.784.256-1.282.171-.505.28-.851.324-1.037.044-.193.085-.476.122-.847a6.15 6.15 0 0 0-1.148.97c-.543.61-.951.996-1.226 1.16a1.133 1.133 0 0 1-.602.178.9.9 0 0 1-.647-.257c-.178-.17-.268-.36-.268-.568 0-.186.075-.38.223-.58.157-.208.387-.38.692-.513.2-.09.657-.208 1.37-.357a7.284 7.284 0 0 0 1.35-.423 5.726 5.726 0 0 0-1.438-.469c-.914-.193-1.48-.367-1.695-.524-.334-.245-.502-.542-.502-.891 0-.201.082-.383.246-.547a.812.812 0 0 1 .59-.256c.246 0 .506.078.781.234.275.156.617.472 1.026.948.408.468.825.832 1.248 1.092M2.93 9.18c.54 0 .993.19 1.36.568.367.367.55.814.55 1.342 0 .528-.189.98-.567 1.36-.367.366-.815.55-1.343.55-.527 0-.98-.184-1.359-.55a1.884 1.884 0 0 1-.55-1.36c0-.54.183-.992.55-1.36.379-.367.832-.55 1.36-.55"></path>
</svg>
<a aria-hidden="true" tabindex="-1" href="#进阶第14期正则表达式入门"><span class="icon icon-link"></span></a>【进阶第14期】正则表达式入门</h1><div class="wrap-body">
<p>[TOC]</p>
</div></header><div class="menu-tocs"><div class="menu-btn"><svg aria-hidden="true" fill="currentColor" height="1em" width="1em" viewBox="0 0 16 16" version="1.1" data-view-component="true">
  <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg></div><div class="menu-modal"><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#前言">前言</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#正则表达式功能验证查找替换">正则表达式功能：验证、查找、替换</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#正则表达式规则">正则表达式规则</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#字符分类">字符分类</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#普通字符">普通字符</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#简单的转义字符">简单的转义字符</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#元字符">元字符</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#字符集">字符集</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#自定义字符集">自定义字符集</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#次数限定符">次数限定符</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#边界位置界定符">边界（位置）界定符</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#字符集以外">字符集以外</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#引用匹配到的字符串">引用匹配到的字符串</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#高级规则--匹配次数中的贪婪与非贪婪">高级规则--匹配次数中的贪婪与非贪婪</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#贪婪模式">贪婪模式</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#非贪婪模式最小匹配">非贪婪模式（最小匹配）</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#练习">练习</a></div></div><div class="h1wrap-body"><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="前言"><a aria-hidden="true" tabindex="-1" href="#前言"><span class="icon icon-link"></span></a>前言</h2><div class="wrap-body">
<hr>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="正则表达式功能验证查找替换"><a aria-hidden="true" tabindex="-1" href="#正则表达式功能验证查找替换"><span class="icon icon-link"></span></a>正则表达式功能：验证、查找、替换</h3><div class="wrap-body">
<p>1.<code>验证</code>字符串是否符合指定特征，比如验证是否是合法的邮件地址。<strong>Validation</strong>
2. 用来<code>查找</code>字符串，从一个长的文本中查找符合指定特征的字符串，比查找固定字符串更加灵活方便。<strong>Match/find</strong></p>
<ol start="3">
<li>用来<code>替换</code>，比普通的替换更强大。<strong>Replace</strong></li>
</ol>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="正则表达式规则"><a aria-hidden="true" tabindex="-1" href="#正则表达式规则"><span class="icon icon-link"></span></a>正则表达式规则</h2><div class="wrap-body">
<hr>
</div></div><div class="h2wrap-body"><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="字符分类"><a aria-hidden="true" tabindex="-1" href="#字符分类"><span class="icon icon-link"></span></a>字符分类</h3><div class="wrap-body">
<h4 id="普通字符"><a aria-hidden="true" tabindex="-1" href="#普通字符"><span class="icon icon-link"></span></a>普通字符</h4>
<p>字母、数字、汉字、下划线、以及后边章节中没有特殊定义的标点符号，都是"普通字符"。</p>
<h4 id="简单的转义字符"><a aria-hidden="true" tabindex="-1" href="#简单的转义字符"><span class="icon icon-link"></span></a>简单的转义字符</h4>
<p>表达式 | 可匹配
-- | -- |--
\r, \n| 代表回车和换行符
\t    | 制表符
\    | 代表 "" 本身</p>
<p>还有其他元字符， 在<code>前面加 "\" 后</code>，就代表该符号本身</p>





















<table><thead><tr><th>表达式</th><th>可匹配</th></tr></thead><tbody><tr><td><code>\^</code></td><td>匹配 ^ 符号本身</td></tr><tr><td><code>\$</code></td><td>匹配 $ 符号本身</td></tr><tr><td><code>\.</code></td><td>匹配小数点（.）本身</td></tr></tbody></table>
<p><code>举例1：</code> 表达式 "$d"，在匹配字符串 "abc$de" 时 ，匹配结果是：成功；匹配到的内容是："$d"；匹配到的位置是：开始于3，结束于5。</p>
<h4 id="元字符"><a aria-hidden="true" tabindex="-1" href="#元字符"><span class="icon icon-link"></span></a>元字符</h4>
<p>分类：</p>
<ul>
<li>单个字符集、自定义字符集合</li>
<li>字符次数限定符</li>
<li>边界界定符</li>
<li>匹配引用</li>
</ul>
<h5 id="字符集"><a aria-hidden="true" tabindex="-1" href="#字符集"><span class="icon icon-link"></span></a>字符集</h5>
<p><strong>匹配 '多种字符' 其中的任意一个字符</strong></p>

























<table><thead><tr><th>表达式</th><th>可匹配</th></tr></thead><tbody><tr><td>\d</td><td>任意一个数字，0~9 中的任意一个</td></tr><tr><td>\w</td><td>任意一个字母或数字或下划线，也就是 A<del>Z,a</del>z,0~9, _ 中任意一个</td></tr><tr><td>\s</td><td>包括空格、制表符、换页符等空白字符的其中任意一个</td></tr><tr><td>.</td><td>小数点可以匹配除了换行符（\n）以外的任意一个字符</td></tr></tbody></table>
<p><code>举例1：</code> 表达式 "\d\d "，在匹配 "abc123" 时 ，匹配的结果是：成功；匹配到的内容是："12"；匹配到的位置是：开始于3，结束于5。</p>
<h5 id="自定义字符集"><a aria-hidden="true" tabindex="-1" href="#自定义字符集"><span class="icon icon-link"></span></a>自定义字符集</h5>
<p><strong>自定义能够匹配 '多种字符' 的任意一个字符</strong></p>

































<table><thead><tr><th>表达式</th><th>可匹配</th></tr></thead><tbody><tr><td>[ab5@]</td><td>匹配 "a" 或 "b" 或 "5" 或 "@"</td></tr><tr><td>[^abc]</td><td>匹配 "a","b","c" 之外的任意一个字符</td></tr><tr><td>[f-k]</td><td>匹配 "f"~"k" 之间的任意一个字母</td></tr><tr><td>[^A-F0-3]</td><td>匹配 "A"<del>"F","0"</del>"3" 之外的任意一个字符</td></tr><tr><td><code>举例1：</code>表达式 " [bcd] [bcd] " 匹配 "abc123" 时 ，匹配的结果是：成功；匹配到内容是："bc"；匹配的位置是：开始于1，结束于3。</td><td></td></tr><tr><td><code>举例2：</code>表达式 " [^abc] " 匹配 "abc123" 时 ，匹配的结果是：成功；匹配到的内容是："1"；匹配到的位置是：开始于3，结束于4。</td><td></td></tr></tbody></table>
<h5 id="次数限定符"><a aria-hidden="true" tabindex="-1" href="#次数限定符"><span class="icon icon-link"></span></a>次数限定符</h5>
<p><strong>修饰匹配次数的特殊符号</strong>
使用方法是："次数修饰"放在"被修饰的表达式"后边。</p>

























<table><thead><tr><th>表达式</th><th>作用</th></tr></thead><tbody><tr><td>{n}</td><td>表达式重复n次，比如：  "\w{2}" 相当于 "\w\w" ；  "a{5}" 相当于 "aaaaa"</td></tr><tr><td>{m,n}</td><td>表达式至少重复m次，最多重复n次，比如：  "ba{1,3}"可以匹配 "ba"或"baa"或"baaa"</td></tr><tr><td>{m,}</td><td>表达式至少重复m次，比如：  "\w\d{2,}"可以匹配 "a12","_456","M12344"...</td></tr><tr><td>?</td><td>出现零次或一次，最多一次，相当于 {0,1}，比如：  "a[cd]?"可以匹配 "a","ac","ad"</td></tr></tbody></table>
<ul>
<li>| 表达式至少出现1次，相当于 {1,}，比如：  "a+b"可以匹配 "ab","aab","aaab"...
* | 出现任意次（零次、一次、多次），相当于 {0,}，比如：  "^*b"可以匹配 "b","^^^b"...</li>
</ul>
<p><code>举例1：</code> 表达式 " \d + . ? \d * " 在匹配 "It costs $12.5" 时 ，匹配的结果是：成功；匹配到的内容是："12.5"；匹配到的位置是：开始于10，结束于14。
<code>举例2：</code> 表达式 " go {2,8} gle " 在匹配 "Ads by goooooogle" 时 ，匹配的结果是：成功；匹配到的内容是："goooooogle"；匹配到的位置是：开始于7，结束于17。</p>
<h5 id="边界位置界定符"><a aria-hidden="true" tabindex="-1" href="#边界位置界定符"><span class="icon icon-link"></span></a>边界（位置）界定符</h5>
<p>其他一些代表抽象意义的特殊符号</p>

























<table><thead><tr><th>表达式</th><th>作用</th></tr></thead><tbody><tr><td>^</td><td>与字符串开始的地方匹配，不匹配任何字符</td></tr><tr><td>$</td><td>与字符串结束的地方匹配，不匹配任何字符</td></tr><tr><td>\b</td><td>匹配一个单词边界，也就是单词和空格之间的位置，不匹配任何字符</td></tr><tr><td>\1 \2 ..\7</td><td>标识一个八进制转义码或反向引用。如果 \n前面至少有n个捕获子表达式，那么 <em>n</em> 是反向引用。否则，如果n是八进制数 (0-7)，那么n是八进制转义码。</td></tr></tbody></table>
<p><code>举例1：</code> 表达式 <code>^aaa</code> 在匹配 "xxxaaa xxx" 时 ，匹配结果是：失败。因为 "^" 要求与字符串开始的地方匹配，因此，只有当 "aaa" 位于字符串的开头的时候，"^aaa" 才能匹配， 比如："aaaxxxxxx" 。
<code>举例2：</code> 表达式 <code>aaa$</code> 在匹配 "xxx aaa xxx" 时 ，匹配结果是：失败。因为 "$" 要求与字符串结束的地方匹配，因此，只有当 "aaa" 位于字符串的结尾的时候，"aaa$" 才能匹配， 比如："xxx xxx aaa" 。
<code>举例3：</code> 表达式 " <code>.\b.</code>" 在匹配 "@@@abc" 时 ，匹配结果是：成功；匹配到的内容是："@a"；匹配到的位置是：开始于2，结束于4。</p>
<p>进一步说明：</p>
<pre><code class="code-highlight"><span class="code-line">"\b" 与 "^" 和 "$" 类似，本身不匹配任何字符，但是它要求它在匹配结果中所处位置的左右两边，其中一边是 "\w" 范围，另一边是 非"\w" 的范围。
</span></code></pre>
<p><code>举例4：</code> 表达式 " \b end \b " 在匹配 "weekend,endfor,end" 时 ，匹配结果是：成功；匹配到的内容是："end"；匹配到的位置是：开始于15，结束于18。</p>
<p>一些符号可以影响表达式内部的子表达式之间的关系：</p>

















<table><thead><tr><th>表达式</th><th>作用</th></tr></thead><tbody><tr><td>竖线</td><td>左右两边表达式之间 "或" 关系，匹配左边或者右边</td></tr><tr><td>( )</td><td>(1). 在被修饰匹配次数的时候，括号中的表达式可以作为整体被修饰  (2). <code>取匹配结果</code>的时候，括号中的表达式匹配到的内容可以被单独得到</td></tr></tbody></table>
<p><code>举例5：</code> 表达式 " Tom | Jack " 在匹配字符串 "I'm Tom, he is Jack" 时 ，匹配结果是：成功；匹配到的内容是："Tom"；匹配到的位置是：开始于4，结束于7。匹配下一个时，匹配结果是：成功；匹配到的内容是："Jack"；匹配到的位置时：开始于15，结束于19。</p>
<p><code>举例6：</code> 表达式 " ( go \s * ) + " 在匹配 "Let's go go go!" 时 ，匹配结果是：成功；匹配到内容是："go go go"；匹配到的位置是：开始于6，结束于14。</p>
<p><code>举例7：</code> 表达式 " ￥ ( \d + . ? \d * ) " 在匹配 "＄10.9,￥20.5" 时 ，匹配的结果是：成功；匹配到的内容是："￥20.5"；匹配到的位置是：开始于6，结束于10。单独获取括号范围匹配到的内容是："20.5"。</p>
<h5 id="字符集以外"><a aria-hidden="true" tabindex="-1" href="#字符集以外"><span class="icon icon-link"></span></a>字符集以外</h5>

































<table><thead><tr><th>表达式</th><th>可匹配</th></tr></thead><tbody><tr><td>\S</td><td>匹配所有非空白字符（"\s" 可匹配各个空白字符）</td></tr><tr><td>\D</td><td>匹配所有的非数字字符</td></tr><tr><td>\W</td><td>匹配所有的字母、数字、下划线以外的字符</td></tr><tr><td>\B</td><td>匹配非单词边界，即左右两边都是 "\w" 范围或者左右两边都不是 "\w" 范围时的字符缝隙</td></tr><tr><td>[^x]</td><td>匹配非x字符</td></tr><tr><td>[^aeiou]</td><td>匹配非a、e、i、o、u字符</td></tr></tbody></table>
<h5 id="引用匹配到的字符串"><a aria-hidden="true" tabindex="-1" href="#引用匹配到的字符串"><span class="icon icon-link"></span></a>引用匹配到的字符串</h5>





























<table><thead><tr><th>符号</th><th>释义</th></tr></thead><tbody><tr><td>$1、$2、...、$99</td><td>与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。</td></tr><tr><td>$&#x26;</td><td>与 regexp 相匹配的子串。</td></tr><tr><td>$`</td><td>位于匹配子串左侧的文本。</td></tr><tr><td>$'</td><td>位于匹配子串右侧的文本。</td></tr><tr><td><code>$$</code></td><td>直接量符号。</td></tr></tbody></table>
</div></div></div><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="高级规则--匹配次数中的贪婪与非贪婪"><a aria-hidden="true" tabindex="-1" href="#高级规则--匹配次数中的贪婪与非贪婪"><span class="icon icon-link"></span></a>高级规则--匹配次数中的贪婪与非贪婪</h3><div class="wrap-body">
<hr>
<h4 id="贪婪模式"><a aria-hidden="true" tabindex="-1" href="#贪婪模式"><span class="icon icon-link"></span></a>贪婪模式</h4>
<p>在使用修饰匹配次数的特殊符号时，有几种表示方法可以使同一个表达式能够匹配不同的次数，比如："{m,n}", "{m,}", "?", "*", "+"，具体匹配的次数随被匹配的字符串而定。这种 重复匹配不定次数的表达式在匹配过程中，总是尽可能多的匹配 。比如，<code>针对文本 "dxxxdxxxd"</code>，举例如下：</p>

















<table><thead><tr><th>表达式</th><th>匹配结果</th></tr></thead><tbody><tr><td>(d)(\w+)</td><td>"\w+" 将匹配第一个 "d" 之后的所有字符 "xxxdxxxd"</td></tr><tr><td>(d)(\w+)(d)</td><td>"\w+" 将匹配第一个 "d" 和最后一个 "d" 之间的所有字符 "xxxdxxx"。虽然 "\w+" 也能够匹配上最后一个 "d"，但是为了使整个表达式匹配成功，"\w+" 可以 "让出" 它本来能够匹配的最后一个 "d"</td></tr></tbody></table>
<p>由此可见，"\w+" 在匹配的时候，总是尽可能多的匹配符合它规则的字符。虽然第二个举例中，它没有匹配最后一个 "d"，但那也是为了让整个表达式能够匹配成功。同理，带 "*" 和 "{m,n}" 的表达式都是尽可能地多匹配， 带 "?" 的表达式在可匹配可不匹配的时候，也是尽可能的 "要匹配 "。这种匹配原则就叫作 <code>贪婪模式</code>。</p>
<h4 id="非贪婪模式最小匹配"><a aria-hidden="true" tabindex="-1" href="#非贪婪模式最小匹配"><span class="icon icon-link"></span></a>非贪婪模式（最小匹配）</h4>
<p>在修饰匹配次数的特殊符号后再加上一个 "?" 号 ，则可以使匹配次数不定的表达式尽可能少的匹配，使可匹配可不匹配的表达式，尽可能的 "不匹配"。这种匹配原则叫作 "非贪婪" 模式，也叫作 "勉强" 模式。如果少匹配就会导致整个表达式匹配失败的时候，与贪婪模式类似，非贪婪模式会最小限度的再匹配一些，以使整个表达式匹配成功。举例如下，针对文本 "dxxxdxxxd" 举例：</p>

















<table><thead><tr><th>表达式</th><th>匹配结果</th></tr></thead><tbody><tr><td>(d)(\w+?)</td><td>"\w+?" 将尽可能少的匹配第一个 "d" 之后的字符，结果是："\w+?" 只匹配了一个 "x"</td></tr><tr><td>(d) (\w+?)(d)</td><td>为了让整个表达式匹配成功，"\w+?" 不得不匹配 "xxx" 才可以让后边的 "d" 匹配，从而使整个表达式匹配成功。因此，结果是："\w+?" 匹配 "xxx"</td></tr></tbody></table>
<pre><code class="code-highlight"><span class="code-line">`举例1：`
</span><span class="code-line">表达式"&#x3C;td> ( . * ) &#x3C;/td> " 与字符串 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td> &#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>" 匹配时 ，匹配的结果是：成功；匹配到的内容是 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td> &#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>" 整个字符串， 表达式中的 "&#x3C;/td>" 将与字符串中最后一个 "&#x3C;/td>" 匹配。 
</span><span class="code-line">`举例2：` 相比之下，表达式 " &#x3C;td> ( . * ? ) &#x3C;/td> " 匹配举例1中同样的字符串时 ，将只得到 "&#x3C;td>&#x3C;p>aa&#x3C;/p>&#x3C;/td>"， 再次匹配下一个时，可以得到第二个 "&#x3C;td>&#x3C;p>bb&#x3C;/p>&#x3C;/td>"。
</span></code></pre>
<p>（2）、反向引用 \1, \2...
表达式在匹配时，表达式引擎会将小括号 "( )" 包含的表达式所匹配到的字符串记录下来。在获取匹配结果的时候，小括号包含的表达式所匹配到的字符串可以单独获取。这一点，在前面的举例中，已经多次展示了。在实际应用场合中，当用某种边界来查找，而所要获取的内容又不包含边界时，必须使用小括号来指定所要的范围。比如前面的 "  ( . * ? )  "。</p>
<p>其实，"小括号包含的表达式所匹配到的字符串" 不仅是在匹配结束后才可以使用，在匹配过程中也可以使用。表达式后边的部分，可以引用前面 "括号内的子匹配已经匹配到的字符串"。引用方法是 "" 加上一个数字。"\1" 引用第1对括号内匹配到的字符串，"\2" 引用第2对括号内匹配到的字符串……以此类推，如果一对括号内包含另一对括号，则外层的括号先排序号。换句话说，哪一对的左括号 "(" 在前，那这一对就先排序号。</p>
<p>举例如下：
<code>举例1：</code>表达式 " ( ' | " ) ( . * ? ) ( \1 ) " 在匹配 " 'Hello', "World" " 时 ，匹配结果是：成功；匹配到的内容是：" 'Hello' "。再次匹配下一个时，可以匹配到 " "World" "。
<code>举例2：</code>表达式 " ( \w ) \1 {4,} " 在匹配 "aa bbbb abcdefg ccccc 111121111 999999999" 时 ，匹配结果是：成功；匹配到的内容是 "ccccc"。再次匹配下一个时，将得到 999999999。这个表达式要求 "\w" 范围的字符至少重复5次，   注意与 "\w{5,}" 之间的区别 。</p>
<p>举例3：表达式 " &#x3C; ( \w + ) \s * ( \w + ( = ( ' | " ) . * ? \4 ) ? \s * ) * > . * ? &#x3C;/ \1 > " 在匹配 "" 时 ，匹配结果是成功。如果 "" 与 "" 不配对，则会匹配失败；如果改成其他配对，也可以匹配成功。</p>
<p>(3)、 预搜索，不匹配；反向预搜索，不匹配
前面的章节中，我讲到了几个代表抽象意义的特殊符号："^"，"$"，"\b"。它们都有一个共同点，那就是：它们本身不匹配任何字符，只是对 "字符串的两头" 或者 "字符之间的缝隙" 附加了一个条件。</p>
<p>理解到这个概念以后，本节将继续介绍另外一种对 "两头" 或者 "缝隙" 附加条件的，更加灵活的表示方法。</p>
<pre><code class="code-highlight"><span class="code-line">正向预搜索："(?=xxxxx)"，"(?!xxxxx)"
</span></code></pre>
<p>格式："(?=xxxxx)"，在被匹配的字符串中，它对所处的 "缝隙" 或者 "两头" 附加的条件是：所在缝隙的右侧，必须能够匹配上 xxxxx 这部分的表达式。因为它只是在此作为这个缝隙上附加的条件，所以它并不影响后边的表达式去真正匹配这个缝隙之后的字符。这就类似 "\b"，本身不匹配任何字符。"\b" 只是将所在缝隙之前、之后的字符取来进行了一下判断，不会影响后边的表达式来真正的匹配。
举例1：表达式 " Windows  (?= NT | XP ) " 在匹配 "Windows 98, Windows NT, Windows 2000" 时 ，将只匹配 "Windows NT" 中的 "Windows "，其他的 "Windows " 字样则不被匹配。
举例2：表达式 " ( \w ) ( (?= \1 \1 \1 ) ( \1 ) ) + " 在匹配字符串 "aaa ffffff 999999999" 时 ，将可以匹配6个"f"的前4个，可以匹配9个"9"的前7个。这个表达式可以读解成：重复4次以上的字母数字，则匹配其剩下最后2位之前的部分。当然，这个表达式可以不这样写，在此的目的是作为演示之用。</p>
<pre><code class="code-highlight"><span class="code-line">格式："(?!xxxxx)"，所在缝隙的右侧，必须不能匹配 xxxxx 这部分表达式。
</span></code></pre>
<p>举例3：表达式 " ( (?! \b stop \b ) . ) + " 在匹配 "fdjka ljfdl stop fjdsla fdj" 时 ，将从头一直匹配到 "stop" 之前的位置，如果字符串中没有 "stop"，则匹配整个字符串。</p>
<p>举例4：表达式 " do (?! \w ) " 在匹配字符串 "done, do, dog" 时 ，只能匹配 "do"。在本条举例中，"do" 后边使用 "(?!\w)" 和使用 "\b" 效果是一样的。</p>
<p>反向预搜索："(?&#x3C;=xxxxx)"，"(?&#x3C;!xxxxx)"</p>
<pre><code class="code-highlight"><span class="code-line">这两种格式的概念和正向预搜索是类似的，反向预搜索要求的条件是：所在缝隙的 "左侧"，两种格式分别要求必须能够匹配和必须不能够匹配指定表达式，而不是去判断右侧。与 "正向预搜索" 一样的是：它们都是对所在缝隙的一种附加条件，本身都不匹配任何字符。
</span><span class="code-line">
</span><span class="code-line">举例5：表达式 " (?&#x3C;= \d {4} ) \d + (?= \d {4} ) " 在匹配 "1234567890123456" 时，将匹配除了前4个数字和后4个数字之外的中间8个数字。由于 JScript.RegExp 不支持反向预搜索，因此，本条举例不能够进行演示。很多其他的引擎可以支持反向预搜索，比如：Java 1.4 以上的 java.util.regex 包，.NET 中System.Text.RegularExpressions 命名空间，以及本站推荐的 最简单易用的 DEELX 正则引擎 。
</span></code></pre>
<p>3 其他通用规则
还有一些在各个正则表达式引擎之间比较通用的规则，在前面的讲解过程中没有提到。</p>
<p>（1） 表达式中，可以使用 "\xXX" 和 "\uXXXX" 表示一个字符（"X" 表示一个十六进制数）</p>

















<table><thead><tr><th>形式</th><th>字符范围</th></tr></thead><tbody><tr><td>\xXX</td><td>编号在 0 ~ 255 范围的字符，比如： 空格可以使用 "\x20" 表示</td></tr><tr><td>\uXXXX</td><td>任何字符可以使用 "\u" 再加上其编号的4位十六进制数表示，比如： "\u4E2D"</td></tr></tbody></table>
<p>3.2 在表达式中有特殊意义，需要添加 "" 才能匹配该字符本身的字符汇总</p>





































<table><thead><tr><th>字符</th><th>说明</th></tr></thead><tbody><tr><td>^</td><td>匹配输入字符串的开始位置。要匹配 "^" 字符本身，请使用 "^"</td></tr><tr><td>$</td><td>匹配输入字符串的结尾位置。要匹配 "$" 字符本身，请使用 "$"</td></tr><tr><td>( )</td><td>标记一个<code>子表达式</code>的开始和结束位置。要匹配小括号，请使用 "(" 和 ")"</td></tr><tr><td>[ ]</td><td>用来自定义能够匹配 '多种字符' 的表达式。要匹配中括号，请使用 "[" 和 "]"</td></tr><tr><td>{ }</td><td>修饰匹配次数的符号。要匹配大括号，请使用 "{" 和 "}"</td></tr><tr><td>.</td><td>匹配除了换行符（\n）以外的任意一个字符。要匹配小数点本身，请使用 "."</td></tr><tr><td>?</td><td>修饰匹配次数为 0 次或 1 次。要匹配 "?" 字符本身，请使用 "?"</td></tr></tbody></table>
<ul>
<li>| 修饰匹配次数为至少 1 次。要匹配 "+" 字符本身，请使用 "+"
* | 修饰匹配次数为 0 次或任意次。要匹配 "*" 字符本身，请使用 "*"
竖线 |左右两边表达式之间 "或" 关系。匹配 <code>竖线</code> 本身，请使用 <code>竖线</code></li>
</ul>
<p><strong>如何修改子匹配</strong></p>
<pre><code class="code-highlight"><span class="code-line">var s1 = "foo-style-css";
</span><span class="code-line">s1 = s1.replace(/-(\w)/g, function(all, letter){
</span><span class="code-line"> console.log(arguments)
</span><span class="code-line"> return letter.toUpperCase();
</span><span class="code-line">});
</span></code></pre>

















<table><thead><tr><th>compare</th><th>des</th></tr></thead><tbody><tr><td>(?=X)</td><td>匹配任何其后紧接指定字符串 n 的字符串</td></tr><tr><td>(?:X)</td><td><code>(X)</code>和<code>(?:X)</code>，前者是捕获分组，后者不获</td></tr></tbody></table>
<pre><code class="code-highlight"><span class="code-line">/(\w)(?=\1{3,})/.test("AAAAAAAA") //true
</span><span class="code-line">/(\w)(?=\1{3,})/.test("AAAB") //false
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">var m = "abcabc".match(/(?:a)(b)(c)/)
</span><span class="code-line">//结果 ["abc", "b", "c"]
</span><span class="code-line">// m[0] 是/(?:a)(b)(c)/匹配到的整个字符串，这里包括了a
</span><span class="code-line">// m[1] 是捕获组1，即(b)匹配的子字符串substring or sub sequence
</span><span class="code-line">// m[2] 是捕获组2，即(c)匹配到的
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="练习"><a aria-hidden="true" tabindex="-1" href="#练习"><span class="icon icon-link"></span></a>练习</h3><div class="wrap-body">
<ul>
<li><a href="http://regex.alf.nu">闯关模式练习正则表达式，完成一个个正则匹配的测验</a></li>
<li><a href="http://regexone.com/">通过实际练习掌握正则表达式</a></li>
<li><a href="https://regexcrossword.com/">正则挑战，有不同难度，很丰富</a></li>
<li><a href="http://callumacrae.github.io/regex-tuesday/">正则挑战，完成正则匹配要求</a></li>
</ul>
</div></div></div></div></div></div></div><footer class="footer-wrap"><footer class="max-container">© 2022 Kenny Wang.</footer></footer><script src="../data.js" defer></script><script src="../js/fuse.min.js" defer></script><script src="../js/main.js" defer></script><div id="mysearch"><div class="mysearch-box"><div class="mysearch-input"><div><svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 18 18">
  <path fill="currentColor" d="M17.71,16.29 L14.31,12.9 C15.4069846,11.5024547 16.0022094,9.77665502 16,8 C16,3.581722 12.418278,0 8,0 C3.581722,0 0,3.581722 0,8 C0,12.418278 3.581722,16 8,16 C9.77665502,16.0022094 11.5024547,15.4069846 12.9,14.31 L16.29,17.71 C16.4777666,17.8993127 16.7333625,18.0057983 17,18.0057983 C17.2666375,18.0057983 17.5222334,17.8993127 17.71,17.71 C17.8993127,17.5222334 18.0057983,17.2666375 18.0057983,17 C18.0057983,16.7333625 17.8993127,16.4777666 17.71,16.29 Z M2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 Z"></path>
</svg><input id="mysearch-input" type="search" placeholder="搜索" autocomplete="off"><div class="mysearch-clear"></div></div><button id="mysearch-close" type="button">搜索</button></div><div class="mysearch-result"><div id="mysearch-menu"></div><div id="mysearch-content"></div></div></div></div></body>
</html>
