## 前言
C 语言编译器用于把源代码编译成最终的可执行程序。
为了在 Windows 上安装 GCC，您需要安装 MinGW

## [一]基础环境搭建

[# vscode配置C/C++环境](https://juejin.cn/post/6949389123102703652)

## [二] 项目环境配置

### 1.1. 配置 3 个 JSON 文件 c_cpp_properties.json、tasks.json、launch.json

#### c_cpp_properties.json

使用快捷键 command+shift+p 打开命令行面板（Command Palette）
输入 edit configurations,在弹出的列表中选择带 JSON 的 C/C++:Edit Configurations(JSON)

## [三]C 基本语法

C 程序由各种令牌组成。令牌可以是关键字、标识符、常量、字符串值，或者是一个符号

| 名称   | 描述                                                                                                                                  |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| 分号   | 每个语句必须以分号结束。它表明一个逻辑实体的结束                                                                                      |
| 注释   |                                                                                                                                       |
| 标识符 | 是用来标识变量、函数。一个标识符以字母 A-Z 或 a-z 或下划线 \_ 开始，后跟零个或多个字母、下划线和数字（0-9）。C 是区分大小写的编程语言 |
| 关键字 | char/int/double/void/long/short/enum/struct/unsigned/signed/if/else/switch/case                                                       |

### 3.1 数据类型

#### 3.1.1 基本类型：

包括两种类型：整数类型和浮点类型。

```
整数：
 a. 默认为10进制 ，10 ，20。
 b. 以0开头为8进制，045，021。
 c. 以0b开头为2进制，0b11101101。
 d. 以0x开头为16进制，0x21458adf。
小数
 单精度常量：2.3f 。
 双精度常量：2.3，默认为双精度。
字符型常量
 用英文单引号括起来，只保存一个字符'a'、'b' 、'*' ，还有转义字符 '\n' 、'\t'。
字符串常量
 用英文的双引号引起来 可以保存多个字符："abc"。
```

**整数类型**

| 类型           | 存储大小    | 值范围                                               |
| -------------- | ----------- | ---------------------------------------------------- |
| char           | 1 字节      | -128 到 127 或 0 到 255                              |
| unsigned char  | 1 字节      | 0 到 255                                             |
| signed char    | 1 字节      | -128 到 127                                          |
| int            | 2 或 4 字节 | -32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647 |
| unsigned int   | 2 或 4 字节 | 0 到 65,535 或 0 到 4,294,967,295                    |
| short          | 2 字节      | -32,768 到 32,767                                    |
| unsigned short | 2 字节      | 0 到 65,535                                          |
| long           | 4 字节      | -2,147,483,648 到 2,147,483,647                      |
| unsigned long  | 4 字节      | 0 到 4,294,967,295                                   |

注意，各种类型的存储大小与系统位数有关，但目前通用的以 64 位系统为主。

**浮点类型**

| 类型        | 存储大小 | 值范围                 | 精度        |
| ----------- | -------- | ---------------------- | ----------- |
| float       | 4 字节   | 1.2E-38 到 3.4E+38     | 6 位有效位  |
| double      | 8 字节   | 2.3E-308 到 1.7E+308   | 15 位有效位 |
| long double | 16 字节  | 3.4E-4932 到 1.1E+4932 | 19 位有效位 |

他们的字节，精度，取值范围都可以通过代码打印实现，如下:

```c
void main() {
		/**
     * 整数类型
     */

    printf("\n\n 整数类型 \n");

    //char 1 字节
    printf("char 存储大小: %lu \n", sizeof(char));
    printf("unsinged char 存储大小: %lu \n", sizeof(unsigned char));

    //short 2 字节
    printf("short 存储大小: %lu \n", sizeof(short));
    printf("unsinged short 存储大小: %lu \n", sizeof(unsigned short));

    //int 4 字节
    printf("int 存储大小: %lu \n", sizeof(int));
    printf("unsinged int 存储大小: %lu \n", sizeof(unsigned int));


    //long 4/8 字节
    printf("long 存储大小: %lu \n", sizeof(long));
    printf("unsinged long 存储大小: %lu \n", sizeof(unsigned long));

		/**
     * 浮点类型
     */

    printf("\n\n 浮点类型 \n");
    //float 4 字节 ，精度 6 位小数
    printf("float 存储最大字节数：%lu \n", sizeof(float));
    printf("float 最小值：%e \n", FLT_MIN);
    printf("float 最大值：%e \n", FLT_MAX);
    printf("float 精度值：%d \n", FLT_DIG);

    //double 8 字节
    printf("double 存储最大字节数：%d \n", sizeof(double));
    printf("double 最小值：%e \n", DBL_MIN);
    printf("double 最大值：%e \n", DBL_MAX);
    printf("double 精度值：%d \n", DBL_DIG);

    //long double 16 字节
    printf("long double 存储最大字节数：%lu byte \n", sizeof(long double));
    printf("long double 最小值：%lg \n", LDBL_MIN);
    printf("long double 最大值：%lg \n", LDBL_MAX);
    printf("long double 精度值：%d \n", LDBL_DIG);

}
```

可以通过 sizeof 关键字来获取数据类型占用内存的大小。

| 格式控制符                                                                                    | 说明                                                                         |
| --------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
| %c                                                                                            | 读取一个单一的字符                                                           |
| %hd、%d、%ld                                                                                  | 读取一个十进制整数，并分别赋值给 short、int、long 类型                       |
| %ho、%o、%lo                                                                                  | 读取一个八进制整数（可带前缀也可不带），并分别赋值给 short、int、long 类型   |
| %hx、%x、%lx                                                                                  | 读取一个十六进制整数（可带前缀也可不带），并分别赋值给 short、int、long 类型 |
| %hu、%u、%lu                                                                                  |
| 读取一个无符号整数，并分别赋值给 unsigned short、unsigned int、unsigned long 类型             |
| %f、%lf                                                                                       | 读取一个十进制形式的小数，并分别赋值给 float、double 类型                    |
| %e、%le                                                                                       |
| 读取一个指数形式的小数，并分别赋值给 float、double 类型                                       |
| %g、%lg                                                                                       |
| 既可以读取一个十进制形式的小数，也可以读取一个指数形式的小数，并分别赋值给 float、double 类型 |
| %s                                                                                            | 读取一个字符串（以空白符为结束）                                             |

#### 3.1.2 枚举类型

它们也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。

#### 3.1.3 void 类型

void 类型指定没有可用的值。它通常用于以下三种情况下：

- 函数返回为空
- 函数参数为空
- 指针指向 void，如 类型为 `void *` 的指针代表对象的地址

#### 3.1.4 派生类型

它们包括：指针类型、数组类型、结构类型、共用体类型和函数类型。

### 3.2 数据类型转换

转换规则：
1、数据类型转换：C 语言中如果一个表达式中含有不同类型的常量和变量，在计算时，会将它们自动转换为同一种类型；在 C 语言中也可以对数据类型进行强制转换；

2、自动转换规则：

- a. 浮点数赋给整型，该浮点数小数被舍去；
- b. 整数赋给浮点型，数值不变，但是被存储到相应的浮点型变量中；

3、强制类型转换形式: (类型说明符)(表达式)

### 3.3 变量

变量定义就是告诉编译器在何处创建变量的存储，以及如何创建变量的存储

```c
// 语法：type variable_list;
int a,b,c
float j,k,l
// 语法：type variable_name = value;
int a = 4
```

变量的声明有两种情况：

- 1、一种是需要建立存储空间的。例如：int a 在声明的时候就已经建立了存储空间。
- 2、另一种是不需要建立存储空间的，通过使用 extern 关键字声明变量名而不定义它。 例如：extern int a 其中变量 a 可以在别的文件中定义的。



#### 3.3.1 作用域

C 语言中有三个地方可以声明变量：

- 在函数或块内部的局部变量
- 在所有函数外部的全局变量
- 在形式参数的函数参数定义中

#### 3.3.2 变量存储

- 全局变量保存在内存的全局存储区中，占用静态的存储单元；
- 局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。
- 当局部变量被定义时，系统不会对其初始化，您必须自行对其初始化。

定义全局变量时，系统会自动对其初始化，如下所示：

| 数据类型 | 初始化默认值 |
| -------- | ------------ |
| int      | 0            |
| char     | '\0'         |
| float    | 0            |
| double   | 0            |
| pointer  | NULL         |

从作用域角度将变量分为局部变量和全局变量。它们采取的存储类别如下：

局部变量：
- ①自动变量，即动态局部变量(离开函数，值就消失)。
- ②静态局部变量(离开函数，值仍保留)。 ==> 类似JS 闭包
- ③寄存器变量(离开函数，值就消失)。
- ④形式参数可以定义为自动变量或寄存器变量。

全局变量：
- ①静态外部变量(只限本程序文件使用)。
- ②外部变量(即非静态的外部变量，允许其它程序文件引用)。

**动态存储和静态存储**
从变量存在时间可将变量存储分为动态存储和静态存储。静态存储是在整个程序运行时都存在，而动态存储则是在调用函数时临时分配存储单元。

动态存储：
- ①自动变量(函数内有效)。
- ②寄存器变量(函数内有效)。
- ③形式参数。

静态存储：
- ①静态局部变量(函数内有效)。
- ②静态外部变量(本程序文件内有效)。
- ③外部变量(整个程序可引用)。

**静态存储区和动态存储区**
从变量值存放的位置可将变量存储区分为静态存储区和动态存储区：

内存中静态存储区：
- ①静态局部变量。
- ②静态外部变量。
- ③外部变量(可被同一程序其它文件引用)。

内存中动态存储区：自动变量和形式参数。
CPU中的寄存器：寄存器变量。



### 3.4 常量

常量是固定值，在程序执行期间不会改变。这些固定的值，又叫做字面量。

有两种简单的定义常量的方式：

使用 #define 预处理器。
使用 const 关键字

```C
// 语法: #define identifier value
#define LENGTH 10
// 语法： const type variable = value;
const int var = 10;
```

#### 3.4.1 整数常量

整数常量可以是十进制、八进制或十六进制的常量。前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。

整数常量也可以带一个后缀，后缀是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。后缀可以是大写，也可以是小写，U 和 L 的顺序任意。

```
212         /* 合法的 */
215u        /* 合法的 */
0xFeeL      /* 合法的 */
078         /* 非法的：8 不是八进制的数字 */
032UU       /* 非法的：不能重复后缀 */
```

#### 3.4.2 浮点数常量

浮点常量由整数部分、小数点、小数部分和指数部分组成。您可以使用小数形式或者指数形式来表示浮点常量。

```c
3.14159       /* 合法的 */
314159E-5L    /* 合法的 */
510E          /* 非法的：不完整的指数 */
210f          /* 非法的：没有小数或指数 */
.e55          /* 非法的：缺少整数或分数 */
```

当使用小数形式表示时，必须包含整数部分、小数部分，或同时包含两者。当使用指数形式表示时， 必须包含小数点、指数，或同时包含两者。带符号的指数是用 e 或 E 引入的。

### 3.5 函数

```c
// 语法：
return_type function_name( parameter list )
{
   body of the function
}

```

### 3.6 结构体

### 3.7 指针

- 指针也就是内存地址，指针变量是用来存放内存地址的变量
- 每一个变量都有一个内存位置，每一个内存位置都定义了可使用 `&` 运算符访问的地址，它表示了在内存中的一个地址。

```
int    *ip;    /* 一个整型的指针 */
double *dp;    /* 一个 double 型的指针 */
float  *fp;    /* 一个浮点型的指针 */
char   *ch;    /* 一个字符型的指针 */
```

### 3.8 字符串

### 3.9 枚举

### 3.10 头文件

```c
#include <file>
```

### 3.11 运算符

| 运算符 | 描述                             | 实例              |
| ------ | -------------------------------- | ----------------- |
| +      | 把两个操作数相加                 | A + B 将得到 30   |
| -      | 从第一个操作数中减去第二个操作数 | A - B 将得到 -10  |
| \*     | 把两个操作数相乘                 | A \* B 将得到 200 |
| /      | 分子除以分母                     | B / A 将得到 2    |
| %      | 取模运算符，整除后的余数         | B % A 将得到 0    |
| ++     | 自增运算符，整数值增加 1         | A++ 将得到 11     |
| --     | 自减运算符，整数值减少 1         | A-- 将得到 9      |

### 3.11 预处理器

所有的预处理器命令都是以井号（#）开头
|指令 |描述|
|---|---|
|#define |定义宏|
|#include |包含一个源代码文件|
|#undef |取消已定义的宏|
|#ifdef |如果宏已经定义，则返回真|
|#ifndef| 如果宏没有定义，则返回真|
|#if |如果给定条件为真，则编译下面代码|
|#else |#if 的替代方案|
|#elif |如果前面的 #if 给定条件不为真，当前条件为真，则编译下面代码|
|#endif |结束一个 #if……#else 条件编译块|
|#error| 当遇到标准错误时，输出错误消息|
|#pragma| 使用标准化方法，向编译器发布特殊的命令到编译器中|

### 内存管理

C 语言为内存的分配和管理提供了几个函数。这些函数可以在 `<stdlib.h>` 头文件中找到。

| 序号                                         | 函数和描述                                                                                                                                               |
| -------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| \*void calloc(int num, int size);            | 在内存中动态地分配 num 个长度为 size 的连续空间，并将每一个字节都初始化为 0。所以它的结果是分配了 numsize 个字节长度的内存空间，并且每个字节的值都是 0。 |
| void free(void \*address);                   | 该函数释放 address 所指向的内存块,释放的是动态分配的内存空间。                                                                                           |
| void \*malloc(int num);                      | 在堆区分配一块指定大小的内存空间，用来存放数据。这块内存空间在函数执行完成后不会被初始化，它们的值是未知的。                                             |
| void \*realloc(void \*address, int newsize); | 该函数重新分配内存，把内存扩展到 newsize。                                                                                                               |

**注意: ** void _ 类型表示未确定类型的指针。C、C++ 规定 void _ 类型可以通过类型转换强制转换为任何其它类型的指针。


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f570252d45aa46009b386ec3eea24e5f~tplv-k3u1fbpfcp-watermark.image?)
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d9b631cc442418591c9842fedf23f8c~tplv-k3u1fbpfcp-watermark.image?)

### 标准库

库变量：

库宏：
在定义了宏之后，无论宏名称出现在源代码的何处，预处理器都会把它用定义时指定的文本替换掉。

库函数：

| 库名        | 描述               |常用API|
| ----------- | ------------------ |---|
| `<stdio.h>` | 文件输入输出       |printf|
| `<math.h>`  | 定义了各种数学函数 ||
|`<window.h>`||system|



### 拓展

- [# 漫谈C语言内存管理](https://juejin.cn/post/7033711811006464030)
- [# 重学 C 语言](https://juejin.cn/post/6978729526993879076)